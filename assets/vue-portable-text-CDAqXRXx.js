import{x as U,o as z,y as F,z as k}from"./index-cF9PEHBv.js";function be(e){let n=new Date(e);return n.getMonth()+1+"-"+(n.getDate()+1)+"-"+n.getFullYear().toString().substring(2,4)}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),t.push.apply(t,r)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?N(Object(t),!0).forEach(function(r){G(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function G(e,n,t){return n=J(n),n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function J(e){var n=Q(e,"string");return typeof n=="symbol"?n:n+""}function Q(e,n){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function O(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(n=>typeof n=="string"))}function A(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(n=>typeof n._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(n=>typeof n=="object"&&"_type"in n)}function B(e){return A(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function M(e){return e._type==="@list"}function L(e){return e._type==="@span"}function E(e){return e._type==="@text"}const j=["strong","em","code","underline","strike-through"];function R(e,n,t){if(!O(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),u={};return r.forEach(o=>{u[o]=1;for(let s=n+1;s<t.length;s++){const f=t[s];if(f&&O(f)&&Array.isArray(f.marks)&&f.marks.indexOf(o)!==-1)u[o]++;else break}}),r.sort((o,s)=>V(u,o,s))}function V(e,n,t){const r=e[n],u=e[t];if(r!==u)return u-r;const o=j.indexOf(n),s=j.indexOf(t);return o!==s?o-s:n.localeCompare(t)}function X(e){var n;const{children:t,markDefs:r=[]}=e;if(!t||!t.length)return[];const u=t.map(R),o={_type:"@span",children:[],markType:"<unknown>"};let s=[o];for(let f=0;f<t.length;f++){const h=t[f];if(!h)continue;const g=u[f]||[];let b=1;if(s.length>1)for(b;b<s.length;b++){const l=((n=s[b])==null?void 0:n.markKey)||"",c=g.indexOf(l);if(c===-1)break;g.splice(c,1)}s=s.slice(0,b);let i=s[s.length-1];if(i){for(const l of g){const c=r.find(y=>y._key===l),p=c?c._type:l,a={_type:"@span",_key:h._key,children:[],markDef:c,markType:p,markKey:l};i.children.push(a),s.push(a),i=a}if(O(h)){const l=h.text.split(`
`);for(let c=l.length;c-- >1;)l.splice(c,0,`
`);i.children=i.children.concat(l.map(c=>({_type:"@text",text:c})))}else i.children=i.children.concat(h)}}return o.children}function Y(e,n){const t=[];let r;for(let u=0;u<e.length;u++){const o=e[u];if(o){if(!B(o)){t.push(o),r=void 0;continue}if(!r){r=x(o,u,n),t.push(r);continue}if(H(o,r)){r.children.push(o);continue}if((o.level||1)>r.level){const s=x(o,u,n);if(n==="html"){const f=r.children[r.children.length-1],h=$($({},f),{},{children:[...f.children,s]});r.children[r.children.length-1]=h}else r.children.push(s);r=s;continue}if((o.level||1)<r.level){const s=t[t.length-1],f=s&&D(s,o);if(f){r=f,r.children.push(o);continue}r=x(o,u,n),t.push(r);continue}if(o.listItem!==r.listItem){const s=t[t.length-1],f=s&&D(s,{level:o.level||1});if(f&&f.listItem===o.listItem){r=f,r.children.push(o);continue}else{r=x(o,u,n),t.push(r);continue}}console.warn("Unknown state encountered for block",o),t.push(o)}}return t}function H(e,n){return(e.level||1)===n.level&&e.listItem===n.listItem}function x(e,n,t){return{_type:"@list",_key:`${e._key||`${n}`}-parent`,mode:t,level:e.level||1,listItem:e.listItem,children:[e]}}function D(e,n){const t=n.level||1,r=n.listItem||"normal",u=typeof n.listItem=="string";if(M(e)&&(e.level||1)===t&&u&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const o=e.children[e.children.length-1];return o&&!O(o)?D(o,n):void 0}function C(e){let n="";return e.children.forEach(t=>{E(t)?n+=t.text:L(t)&&(n+=C(t))}),n}const W="html";function Z(e,n){const{block:t,list:r,listItem:u,marks:o,types:s,...f}=n;return{...e,block:_(e,n,"block"),list:_(e,n,"list"),listItem:_(e,n,"listItem"),marks:_(e,n,"marks"),types:_(e,n,"types"),...f}}function _(e,n,t){const r=n[t],u=e[t];return typeof r=="function"||r&&typeof u=="function"?r:r?{...u,...r}:u}const d=e=>(n,{slots:t})=>{var r;return k(e,(r=t.default)==null?void 0:r.call(t))},ee=({value:e},{slots:n})=>{var t;return k("a",{href:e==null?void 0:e.href},(t=n.default)==null?void 0:t.call(n))},ne={textDecoration:"underline"},te={code:d("code"),em:d("em"),link:ee,"strike-through":d("del"),strong:d("strong"),underline:(e,{slots:n})=>{var t;return k("span",{style:ne},(t=n.default)==null?void 0:t.call(n))}},re={number:d("ol"),bullet:d("ul")},oe=d("li"),w=(e,n)=>`[@portabletext/vue] Unknown ${e}, specify a component for it in the \`components.${n}\` prop`,K=e=>w(`block type "${e}"`,"types"),ie=e=>w(`mark type "${e}"`,"marks"),le=e=>w(`block style "${e}"`,"block"),se=e=>w(`list style "${e}"`,"list"),ce=e=>w(`list item style "${e}"`,"listItem");function ue(e){console.warn(e)}const T={display:"none"},ae=({value:e,isInline:n})=>{const t=K(e._type);return n?k("span",{style:T},t):k("div",{style:T},t)},fe=({markType:e},{slots:n})=>{var t;return k("span",{class:`unknown__pt__mark__${e}`},(t=n.default)==null?void 0:t.call(n))},de=d("p"),pe=d("ul"),ye=d("li"),me=()=>k("br"),ke={normal:d("p"),blockquote:d("blockquote"),h1:d("h1"),h2:d("h2"),h3:d("h3"),h4:d("h4"),h5:d("h5"),h6:d("h6")},P={types:{},block:ke,marks:te,list:re,listItem:oe,hardBreak:me,unknownType:ae,unknownMark:fe,unknownList:pe,unknownListItem:ye,unknownBlockStyle:de},he=(e,n)=>{function t(i){const{node:l,index:c,isInline:p}=i,a=l._key||`node-${c}`;return M(l)?o(l,c,a):B(l)?u(l,c,a):L(l)?s(l,c,a):r(l)?b(l,c,a,p):A(l)?f(l,c,a,p):E(l)?h(l,a):g(l,c,a,p)}function r(i){return i._type in e.types}function u(i,l,c){const p=S({node:i,index:l,isInline:!1,renderNode:t}),a=e.listItem,y=(typeof a=="function"?a:a[i.listItem])||e.unknownListItem;if(y===e.unknownListItem){const v=i.listItem||"bullet";n(ce(v),{type:v,nodeType:"listItemStyle"})}let m=p.children;if(i.style&&i.style!=="normal"){const{listItem:v,...I}=i;m=t({node:I,index:l,isInline:!1,renderNode:t})}return k(y,{key:c,value:i,index:l,isInline:!1,renderNode:t},()=>m)}function o(i,l,c){const p=i.children.map((m,v)=>t({node:m._key?m:{...m,_key:`li-${l}-${v}`},index:v,isInline:!1,renderNode:t})),a=e.list,y=(typeof a=="function"?a:a[i.listItem])||e.unknownList;if(y===e.unknownList){const m=i.listItem||"bullet";n(se(m),{nodeType:"listStyle",type:m})}return k(y,{key:c,value:i,index:l,isInline:!1,renderNode:t},()=>p)}function s(i,l,c){const{markDef:p,markType:a,markKey:y}=i,m=e.marks[a]||e.unknownMark,v=i.children.map((I,q)=>t({node:I,index:q,isInline:!0,renderNode:t}));return m===e.unknownMark&&n(ie(a),{nodeType:"mark",type:a}),k(m,{key:c,text:C(i),value:p,markType:a,markKey:y,renderNode:t},()=>v)}function f(i,l,c,p){const{_key:a,children:y,...m}=S({node:i,index:l,isInline:p,renderNode:t}),v=m.node.style||"normal",I=(typeof e.block=="function"?e.block:e.block[v])||e.unknownBlockStyle;return I===e.unknownBlockStyle&&n(le(v),{nodeType:"blockStyle",type:v}),k(I,{key:c,...m,value:m.node,renderNode:t},()=>y)}function h(i,l){if(i.text===`
`){const c=e.hardBreak;return c?k(c,{key:l}):`
`}return i.text}function g(i,l,c,p){const a={value:i,isInline:p,index:l,renderNode:t};n(K(i._type),{nodeType:"block",type:i._type});const y=e.unknownType;return k(y,{key:c,...a})}function b(i,l,c,p){const a={value:i,isInline:p,index:l,renderNode:t},y=e.types[i._type];return y?k(y,{key:c,...a}):void 0}return t};function S(e){const{node:n,index:t,isInline:r,renderNode:u}=e,o=X(n).map((s,f)=>u({node:s,isInline:!0,index:f,renderNode:u}));return{_key:n._key||`block-${t}`,children:o,index:t,isInline:r,node:n}}const ge=U({__name:"vue-portable-text",props:{value:{},components:{},onMissingComponent:{type:[Function,Boolean],default:()=>ue},listNestingMode:{}},setup(e){function n(){}const t=e,r=()=>{const u=t.onMissingComponent||n,o=Array.isArray(t.value)?t.value:[t.value],s=Y(o,t.listNestingMode||W),f=t.components?Z(P,t.components):P,h=he(f,u);return s.map((g,b)=>h({node:g,index:b,isInline:!1,renderNode:h}))};return(u,o)=>(z(),F(r))}});export{be as f,ge as v};
